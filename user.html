<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Market Buy - ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¨ÙˆØª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: white;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
            background: linear-gradient(45deg, #00d4ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 30px;
        }
        
        .card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        
        .card h2 {
            color: #00d4ff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .steps {
            list-style: none;
            counter-reset: step;
        }
        
        .steps li {
            counter-increment: step;
            padding: 15px;
            margin: 10px 0;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            position: relative;
            padding-right: 60px;
        }
        
        .steps li::before {
            content: counter(step);
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 35px;
            height: 35px;
            background: linear-gradient(45deg, #00d4ff, #00ff88);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #1a1a2e;
        }
        
        .bookmarklet-btn {
            display: block;
            width: 100%;
            padding: 20px;
            background: linear-gradient(45deg, #00d4ff, #00ff88);
            color: #1a1a2e;
            text-align: center;
            text-decoration: none;
            font-size: 1.3em;
            font-weight: bold;
            border-radius: 10px;
            margin: 20px 0;
            cursor: grab;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .bookmarklet-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(0,212,255,0.3);
        }
        
        .bookmarklet-btn:active {
            cursor: grabbing;
        }
        
        .warning {
            background: rgba(255,193,7,0.2);
            border: 1px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .warning-title {
            color: #ffc107;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .success {
            background: rgba(76,175,80,0.2);
            border: 1px solid #4CAF50;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .feature {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .feature-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            color: #666;
        }
        
        code {
            background: rgba(0,0,0,0.5);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ›’ Auto Market Buy</h1>
        <p class="subtitle">Ø¨ÙˆØª Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ø³ÙˆÙ‚</p>
        
        <div class="card">
            <h2>âœ¨ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª</h2>
            <div class="features">
                <div class="feature">
                    <div class="feature-icon">ğŸ”„</div>
                    <div>ÙØ­Øµ Ø¯ÙˆØ±ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ</div>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ””</div>
                    <div>ØªÙ†Ø¨ÙŠÙ‡ ØµÙˆØªÙŠ</div>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ¨</div>
                    <div>ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¹Ù†Ø§ØµØ±</div>
                </div>
                <div class="feature">
                    <div class="feature-icon">âš¡</div>
                    <div>Ø´Ø±Ø§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠ</div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2>ğŸ“¥ Ø§Ù„ØªØ«Ø¨ÙŠØª</h2>
            
            <div class="warning">
                <div class="warning-title">âš ï¸ Ù…Ù‡Ù…</div>
                Ø§Ø³Ø­Ø¨ Ø§Ù„Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ Ø¥Ù„Ù‰ Ø´Ø±ÙŠØ· Ø§Ù„Ù…ÙØ¶Ù„Ø© (Bookmarks Bar)
            </div>
            
            <!-- Bookmarklet Button -->
            <a class="bookmarklet-btn" id="bookmarklet-link" href="#">
                ğŸ›’ Ø§Ø³Ø­Ø¨Ù†ÙŠ Ù„Ù„Ù…ÙØ¶Ù„Ø© - Auto Buy
            </a>
            
            <ol class="steps">
                <li>ØªØ£ÙƒØ¯ Ù…Ù† Ø¸Ù‡ÙˆØ± <strong>Ø´Ø±ÙŠØ· Ø§Ù„Ù…ÙØ¶Ù„Ø©</strong> ÙÙŠ Ù…ØªØµÙØ­Ùƒ (Ctrl+Shift+B)</li>
                <li><strong>Ø§Ø³Ø­Ø¨ Ø§Ù„Ø²Ø± Ø§Ù„Ø£Ø®Ø¶Ø±</strong> Ø£Ø¹Ù„Ø§Ù‡ ÙˆØ£ÙÙ„ØªÙ‡ ÙÙŠ Ø´Ø±ÙŠØ· Ø§Ù„Ù…ÙØ¶Ù„Ø©</li>
                <li>Ø§ÙØªØ­ ØµÙØ­Ø© <strong>Ø§Ù„Ø³ÙˆÙ‚</strong> ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø© (mode=exchange)</li>
                <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± ÙÙŠ Ø§Ù„Ù…ÙØ¶Ù„Ø© Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª</li>
            </ol>
            
            <div class="success">
                <strong>âœ… Ø¬Ø§Ù‡Ø²!</strong> Ø§Ù„Ø¨ÙˆØª Ø³ÙŠØ¸Ù‡Ø± ÙÙŠ Ø£Ø¹Ù„Ù‰ ÙŠÙ…ÙŠÙ† Ø§Ù„Ø´Ø§Ø´Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ´ØºÙŠÙ„
            </div>
        </div>
        
        <div class="card">
            <h2>ğŸ“– Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h2>
            <ul class="steps">
                <li>Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„ÙƒÙ„ Ù…ÙˆØ±Ø¯ (Ø®Ø´Ø¨ØŒ Ø­Ø¬Ø±ØŒ Ø­Ø¯ÙŠØ¯)</li>
                <li>ÙØ¹Ù‘Ù„ <code>ğŸ”Š ØµÙˆØª</code> Ù„Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø¹Ù†Ø¯ ØªÙˆÙØ± Ø§Ù„Ù…ÙˆØ§Ø±Ø¯</li>
                <li>ÙØ¹Ù‘Ù„ <code>ğŸ›’ Ø´Ø±Ø§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠ</code> Ù„Ù„Ø´Ø±Ø§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</li>
                <li>Ø§Ù„Ø¨ÙˆØª ÙŠÙØ­Øµ ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ© (Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØºÙŠÙŠØ±)</li>
            </ul>
        </div>
        
        <div class="card">
            <h2>âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø§Øª</h2>
            <div class="warning">
                <ul style="list-style: disc; padding-right: 20px; line-height: 2;">
                    <li>ÙŠØ¬Ø¨ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± ÙÙŠ ÙƒÙ„ Ù…Ø±Ø© ØªÙØªØ­ ÙÙŠÙ‡Ø§ ØµÙØ­Ø© Ø§Ù„Ø³ÙˆÙ‚</li>
                    <li>Ù„Ø§ ØªØºÙ„Ù‚ ØµÙØ­Ø© Ø§Ù„Ø³ÙˆÙ‚ Ø£Ø«Ù†Ø§Ø¡ Ø¹Ù…Ù„ Ø§Ù„Ø¨ÙˆØª</li>
                    <li>Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø´ØªØ±Ø§Ø© = Ù…ÙˆØ§Ø±Ø¯Ùƒ - 1000 (Ù„Ù„Ø£Ù…Ø§Ù†)</li>
                </ul>
            </div>
        </div>
        
        <div class="footer">
            <p>ğŸ“± Ù„Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„ØªØ¬Ø¯ÙŠØ¯: @YourTelegram</p>
            <p style="margin-top: 10px; font-size: 12px;">Auto Market Buy v4.0</p>
        </div>
    </div>
    
    <script>
    // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù€ Bookmarklet Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
    const bookmarkletCode = `
(function(){
    var EXPIRY_DATE = "2026-12-01";
    var USER_NAME = decodeURIComponent("%D9%85%D8%B3%D8%AA%D8%AE%D8%AF%D9%85");
    var BUFFER = 1000;
    var CLICK_DELAY = 1000;
    var BETWEEN_BUY_DELAY = 10000;
    var DEFAULT_INTERVAL = 30000;
    
    var TEXTS = {
        title: decodeURIComponent("%D8%B4%D8%B1%D8%A7%D8%A1%20%D8%AA%D9%84%D9%82%D8%A7%D8%A6%D9%8A"),
        wood: decodeURIComponent("%D8%AE%D8%B4%D8%A8"),
        stone: decodeURIComponent("%D8%B7%D9%85%D9%8A"),
        iron: decodeURIComponent("%D8%AD%D8%AF%D9%8A%D8%AF"),
        autoBuy: decodeURIComponent("%D8%B4%D8%B1%D8%A7%D8%A1%20%D8%AA%D9%84%D9%82%D8%A7%D8%A6%D9%8A"),
        sound: decodeURIComponent("%D8%B5%D9%88%D8%AA"),
        stop: decodeURIComponent("%D8%A5%D9%8A%D9%82%D8%A7%D9%81"),
        start: decodeURIComponent("%D8%AA%D8%B4%D8%BA%D9%8A%D9%84"),
        check: decodeURIComponent("%D9%81%D8%AD%D8%B5%20%D8%A7%D9%84%D8%A2%D9%86"),
        close: decodeURIComponent("%D8%A5%D8%BA%D9%84%D8%A7%D9%82"),
        period: decodeURIComponent("%D8%A7%D9%84%D9%81%D8%AA%D8%B1%D8%A9"),
        log: decodeURIComponent("%D8%A7%D9%84%D8%B3%D8%AC%D9%84"),
        day: decodeURIComponent("%D9%8A%D9%88%D9%85"),
        expired: decodeURIComponent("%D8%A7%D9%86%D8%AA%D9%87%D9%89%20%D8%A7%D9%84%D8%A7%D8%B4%D8%AA%D8%B1%D8%A7%D9%83"),
        available: decodeURIComponent("%D9%85%D8%AA%D8%A7%D8%AD"),
        running: decodeURIComponent("%D8%A7%D9%84%D8%A8%D9%88%D8%AA%20%D9%8A%D8%B9%D9%85%D9%84"),
        notEnough: decodeURIComponent("%D8%BA%D9%8A%D8%B1%20%D9%83%D8%A7%D9%81%D9%8A"),
        done: decodeURIComponent("%D8%AA%D9%85"),
        checking: decodeURIComponent("%D9%81%D8%AD%D8%B5")
    };
    
    function checkSub(cb) {
        fetch("https://worldtimeapi.org/api/ip")
        .then(function(r){ return r.json(); })
        .then(function(data){
            var cur = new Date(data.datetime);
            var exp = new Date(EXPIRY_DATE);
            if(cur > exp) cb({valid:false});
            else cb({valid:true, days: Math.ceil((exp-cur)/(1000*60*60*24))});
        })
        .catch(function(){
            var cur = new Date();
            var exp = new Date(EXPIRY_DATE);
            if(cur > exp) cb({valid:false});
            else cb({valid:true, days: Math.ceil((exp-cur)/(1000*60*60*24))});
        });
    }
    
    function showExpired() {
        var d = document.createElement("div");
        d.style.cssText = "position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9999999;background:linear-gradient(135deg,#ff4444,#cc0000);color:white;padding:40px;border-radius:15px;text-align:center;font-family:tahoma;direction:rtl;box-shadow:0 10px 40px rgba(0,0,0,0.5);min-width:350px;";
        d.innerHTML = "<h2 style='margin:0 0 20px;font-size:24px;'>&#9940; " + TEXTS.expired + "</h2><p>" + USER_NAME + "</p>";
        document.body.appendChild(d);
    }
    
    checkSub(function(sub){
        if(!sub.valid){ showExpired(); return; }
        
        if(window.__MB_RUN__){ alert(TEXTS.running + "!"); return; }
        window.__MB_RUN__ = true;
        
        var enabled = true;
        var autoBuy = false;
        var sound = true;
        var interval = DEFAULT_INTERVAL;
        var woodQty = 1000;
        var stoneQty = 1000;
        var ironQty = 1000;
        var timer = null;
        var logBox = null;
        
        function $(s){ return document.querySelector(s); }
        function sleep(ms){ return new Promise(function(r){ setTimeout(r,ms); }); }
        
        function log(m){
            var t = new Date().toLocaleTimeString();
            console.log("[MB]", t, m);
            if(logBox){
                var d = document.createElement("div");
                d.textContent = "[" + t + "] " + m;
                logBox.insertBefore(d, logBox.firstChild);
                while(logBox.children.length > 30) logBox.lastChild.remove();
            }
        }
        
        function beep(){
            if(!sound) return;
            try{
                var ctx = new (window.AudioContext || window.webkitAudioContext)();
                var osc = ctx.createOscillator();
                var gain = ctx.createGain();
                osc.type = "sine";
                osc.frequency.value = 700;
                gain.gain.value = 0.15;
                osc.connect(gain);
                gain.connect(ctx.destination);
                osc.start();
                setTimeout(function(){ osc.stop(); }, 200);
            }catch(e){}
        }
        
        function toNum(t){ return Number(String(t||"0").replace(/[^0-9]/g,"")); }
        function getRes(r){ var e = $("#"+r); return e ? toNum(e.textContent) : 0; }
        function getStock(r){ var e = $("#premium_exchange_stock_"+r); return e ? toNum(e.textContent) : 0; }
        function getStockEl(r){ return $("#premium_exchange_stock_"+r); }
        function getInput(r){ return $("input[name='buy_"+r+"']") || $("input[data-resource='"+r+"'][data-type='buy']"); }
        
        function hl(r, on){
            var e = getStockEl(r);
            if(e) e.style.backgroundColor = on ? "#add8e6" : "";
        }
        function clrHl(){ ["wood","stone","iron"].forEach(function(r){ hl(r,false); }); }
        
        function updRes(){
            var w = $("#mb-w"); var s = $("#mb-s"); var i = $("#mb-i");
            if(w) w.textContent = getRes("wood").toLocaleString();
            if(s) s.textContent = getRes("stone").toLocaleString();
            if(i) i.textContent = getRes("iron").toLocaleString();
        }
        
        async function buyRes(r, qty){
            log(TEXTS.checking + " " + r + "...");
            var stock = getStock(r);
            var myRes = getRes(r);
            var inp = getInput(r);
            if(!inp){ log(r + " input not found"); return false; }
            if(stock < qty){ log(TEXTS.notEnough); return false; }
            var avail = myRes - BUFFER;
            if(avail <= 0){ log(TEXTS.notEnough); return false; }
            var final = Math.min(qty, avail);
            inp.focus();
            inp.value = final;
            inp.dispatchEvent(new Event("input",{bubbles:true}));
            await sleep(CLICK_DELAY);
            var btn1 = $(".btn-premium-exchange-buy");
            if(!btn1){ log("btn not found"); return false; }
            btn1.click();
            await sleep(CLICK_DELAY);
            var btn2 = $(".btn-confirm-yes") || $("[class*='confirm']");
            if(!btn2){ log("confirm not found"); return false; }
            btn2.click();
            await sleep(CLICK_DELAY);
            log(TEXTS.done + "! " + final);
            return true;
        }
        
        async function check(){
            if(!enabled) return;
            log(TEXTS.checking + "...");
            updRes();
            clrHl();
            var res = [
                {n:"wood", q:woodQty, l:TEXTS.wood},
                {n:"stone", q:stoneQty, l:TEXTS.stone},
                {n:"iron", q:ironQty, l:TEXTS.iron}
            ];
            for(var i=0; i<res.length; i++){
                var r = res[i];
                if(r.q <= 0) continue;
                var stock = getStock(r.n);
                log(r.l + ": " + stock + " / " + r.q);
                if(stock >= r.q){
                    log(r.l + " " + TEXTS.available + "!");
                    hl(r.n, true);
                    beep();
                    if(autoBuy){
                        var ok = await buyRes(r.n, r.q);
                        if(ok){ hl(r.n, false); await sleep(BETWEEN_BUY_DELAY); }
                    }
                }
            }
            log(TEXTS.done);
        }
        
        function resetTimer(){
            if(timer) clearInterval(timer);
            timer = setInterval(function(){ if(enabled) check(); }, interval);
        }
        
        function buildUI(){
            if($("#mb-p")) return;
            var css = document.createElement("style");
            css.textContent = "#mb-p{position:fixed;right:20px;top:20px;z-index:999999;width:280px;padding:10px;border-radius:10px;background:rgba(0,100,0,0.92);color:#fff;font-family:tahoma;direction:rtl;font-size:12px}#mb-p h3{margin:0 0 8px;text-align:center;border-bottom:1px solid rgba(255,255,255,0.3);padding-bottom:6px;font-size:14px}#mb-p .inf{background:rgba(255,255,255,0.15);padding:5px;border-radius:5px;margin-bottom:6px;text-align:center;font-size:11px}#mb-p .rs{background:rgba(255,255,255,0.1);padding:5px;border-radius:5px;margin-bottom:6px;font-size:11px}#mb-p .rs div{display:flex;justify-content:space-between;padding:2px 0}#mb-p .rw{display:flex;align-items:center;margin:4px 0;gap:5px}#mb-p .rw label{flex:1}#mb-p .rw input[type=number]{width:65px;padding:3px;border:none;border-radius:3px;text-align:center}#mb-p .ck{margin:5px 0}#mb-p button{width:100%;margin:3px 0;padding:6px;border:none;border-radius:5px;font-weight:bold;cursor:pointer;font-size:11px}#mb-p .bt{background:#4CAF50;color:#fff}#mb-p .bt.off{background:#f44336}#mb-p .bn{background:#2196F3;color:#fff}#mb-p .bi{background:#FF9800;color:#fff}#mb-p .bc{background:#666;color:#fff}#mb-p #mb-lg{max-height:80px;overflow-y:auto;background:rgba(255,255,255,0.1);padding:4px;font-size:10px;margin-top:5px;border-radius:3px}";
            document.head.appendChild(css);
            
            var box = document.createElement("div");
            box.id = "mb-p";
            box.innerHTML = "<h3>&#128722; " + TEXTS.title + "</h3>" +
                "<div class='inf'>&#128100; " + USER_NAME + " | &#9203; " + sub.days + " " + TEXTS.day + "</div>" +
                "<div class='rs'><div><span>&#129717; " + TEXTS.wood + ":</span><span id='mb-w'>" + getRes("wood").toLocaleString() + "</span></div>" +
                "<div><span>&#129704; " + TEXTS.stone + ":</span><span id='mb-s'>" + getRes("stone").toLocaleString() + "</span></div>" +
                "<div><span>&#9881; " + TEXTS.iron + ":</span><span id='mb-i'>" + getRes("iron").toLocaleString() + "</span></div></div>" +
                "<div class='rw'><label>&#129717; " + TEXTS.wood + ":</label><input type='number' id='mb-qw' value='" + woodQty + "'></div>" +
                "<div class='rw'><label>&#129704; " + TEXTS.stone + ":</label><input type='number' id='mb-qs' value='" + stoneQty + "'></div>" +
                "<div class='rw'><label>&#9881; " + TEXTS.iron + ":</label><input type='number' id='mb-qi' value='" + ironQty + "'></div>" +
                "<div class='ck'><label><input type='checkbox' id='mb-au'> &#128722; " + TEXTS.autoBuy + "</label></div>" +
                "<div class='ck'><label><input type='checkbox' id='mb-sn' checked> &#128266; " + TEXTS.sound + "</label></div>" +
                "<button class='bt' id='mb-tg'>&#9208; " + TEXTS.stop + "</button>" +
                "<button class='bi' id='mb-in'>&#9201; " + TEXTS.period + " (" + (interval/1000) + "s)</button>" +
                "<button class='bn' id='mb-nw'>&#128260; " + TEXTS.check + "</button>" +
                "<button class='bc' id='mb-cl'>&#10006; " + TEXTS.close + "</button>" +
                "<div id='mb-lg'>-- " + TEXTS.log + " --</div>";
            document.body.appendChild(box);
            
            logBox = $("#mb-lg");
            setInterval(updRes, 5000);
            
            $("#mb-qw").onchange = function(e){ woodQty = Number(e.target.value)||0; };
            $("#mb-qs").onchange = function(e){ stoneQty = Number(e.target.value)||0; };
            $("#mb-qi").onchange = function(e){ ironQty = Number(e.target.value)||0; };
            
            $("#mb-tg").onclick = function(){
                enabled = !enabled;
                var b = $("#mb-tg");
                b.innerHTML = enabled ? "&#9208; " + TEXTS.stop : "&#9654; " + TEXTS.start;
                b.className = enabled ? "bt" : "bt off";
                if(enabled) resetTimer(); else { clearInterval(timer); clrHl(); }
            };
            
            $("#mb-nw").onclick = function(){ check(); };
            
            $("#mb-in").onclick = function(){
                var v = prompt(TEXTS.period + " (s):", interval/1000);
                if(v){ interval = Number(v)*1000; $("#mb-in").innerHTML = "&#9201; " + TEXTS.period + " (" + (interval/1000) + "s)"; if(enabled) resetTimer(); }
            };
            
            $("#mb-au").onchange = function(e){ autoBuy = e.target.checked; };
            $("#mb-sn").onchange = function(e){ sound = e.target.checked; };
            
            $("#mb-cl").onclick = function(){
                clearInterval(timer);
                box.remove();
                window.__MB_RUN__ = false;
            };
        }
        
        buildUI();
        resetTimer();
        log(TEXTS.running + "!");
    });
})();
    `;
    
    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø¥Ù„Ù‰ Bookmarklet
    const encoded = 'javascript:' + encodeURIComponent(bookmarkletCode.replace(/\s+/g, ' ').trim());
    document.getElementById('bookmarklet-link').href = encoded;
    </script>
</body>
</html>
