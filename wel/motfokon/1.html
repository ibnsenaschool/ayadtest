<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…ØªÙÙˆÙ‚ÙŠÙ† - Ø³Ù„Ø§ÙŠØ¯Ø±</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Segoe UI", Tahoma, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #667eea, #764ba2);
      min-height: 100vh;
      padding: 20px;
      color: #111827;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    /* HEADER */
    .header {
      background: #ffffff;
      padding: 18px 20px;
      border-radius: 18px;
      text-align: center;
      margin-bottom: 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
    }
    .header h1 {
      font-size: 1.8em;
      color: #4c51bf;
      margin-bottom: 5px;
    }
    .header p {
      font-size: 0.9em;
      color: #4b5563;
    }

    /* MESSAGE */
    .message {
      text-align: center;
      padding: 10px 12px;
      border-radius: 10px;
      margin-bottom: 12px;
      background: rgba(255, 255, 255, 0.9);
      color: #111827;
      font-size: 0.9em;
    }

    /* CARD */
    .slider-wrapper {
      margin-top: 10px;
    }

    .student-card {
      background: linear-gradient(135deg, #ffffff, #fdf2ff);
      border-radius: 24px;
      padding: 25px 20px 30px;
      box-shadow: 0 14px 40px rgba(0, 0, 0, 0.25);
      text-align: center;
      border: 3px solid #e5d5ff;
      min-height: 320px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .student-photo {
      width: 160px;
      height: 160px;
      border-radius: 50%;
      border: 6px solid #a855f7;
      overflow: hidden;
      margin: 0 auto 15px;
      background: #f3e8ff;
    }

    .student-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .student-name {
      font-size: 1.7em;
      font-weight: bold;
      color: #6b21a8;
      margin-bottom: 6px;
    }

    .student-average {
      font-size: 1.2em;
      color: #4c1d95;
      margin-bottom: 4px;
    }

    .student-class,
    .student-grade {
      font-size: 0.95em;
      color: #4b5563;
    }

    .student-grade {
      margin-top: 3px;
      font-weight: 600;
    }

    /* CONTROLS */
    .controls-box {
      margin-top: 18px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 18px;
      padding: 10px 12px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.18);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .controls-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 0.9em;
      font-weight: 700;
      cursor: pointer;
      transition: 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    .btn-main {
      background: #4f46e5;
      color: #ffffff;
    }

    .btn-main:hover {
      background: #4338ca;
      transform: translateY(-1px);
    }

    .btn-sec {
      background: #e5e7eb;
      color: #111827;
    }

    .btn-sec:hover {
      background: #d1d5db;
      transform: translateY(-1px);
    }

    .counter {
      font-size: 0.9em;
      color: #374151;
      font-weight: 600;
    }

    .speed-control {
      display: flex;
      align-items: center;
      gap: 8px;
      flex: 1;
    }

    .speed-label {
      font-size: 0.85em;
      color: #4b5563;
      white-space: nowrap;
    }

    #speedValue {
      font-weight: 700;
      color: #1f2937;
    }

    #speedRange {
      flex: 1;
    }

    @media (max-width: 700px) {
      .student-card {
        padding-inline: 15px;
      }
      .student-name {
        font-size: 1.5em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- HEADER -->
    <div class="header">
      <h1>ğŸ… Ù„ÙˆØ­Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…ØªÙÙˆÙ‘Ù‚ÙŠÙ†</h1>
      <p>ÙŠØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…Ù„Ù <strong>students-data.json</strong> (Ù†ÙØ³ Ù…Ù„Ù ØµÙØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©)</p>
    </div>

    <div id="message" class="message">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨...</div>

    <!-- SLIDER -->
    <div class="slider-wrapper">
      <div id="cardContainer"></div>

      <div class="controls-box" id="controlsBox" style="display:none;">
        <div class="controls-row">
          <div>
            <button class="btn btn-sec" id="prevBtn">â—€ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
            <button class="btn btn-sec" id="nextBtn">Ø§Ù„ØªØ§Ù„ÙŠ â–¶ï¸</button>
          </div>
          <div>
            <button class="btn btn-main" id="playPauseBtn">â¸ Ø¥ÙŠÙ‚Ø§Ù</button>
          </div>
          <div class="counter" id="counterText">Ø·Ø§Ù„Ø¨ 0 Ù…Ù† 0</div>
        </div>

        <div class="controls-row">
          <div class="speed-control">
            <span class="speed-label">Ù…Ø¯Ø© Ø¹Ø±Ø¶ ÙƒÙ„ Ø·Ø§Ù„Ø¨ (Ø«ÙˆØ§Ù†Ù):</span>
            <input type="range" min="3" max="30" value="8" id="speedRange" />
            <span id="speedValue">8s</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Ù†ÙØ³ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„ØµÙÙˆÙ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
    const gradeGroups = {
      "Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø«": ["Ø§Ù„Ø«Ø§Ù„Ø« 1", "Ø§Ù„Ø«Ø§Ù„Ø« 2", "Ø§Ù„Ø«Ø§Ù„Ø« 3", "Ø§Ù„Ø«Ø§Ù„Ø« 4", "Ø§Ù„Ø«Ø§Ù„Ø« 5"],
      "Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹": ["Ø§Ù„Ø±Ø§Ø¨Ø¹ 1", "Ø§Ù„Ø±Ø§Ø¨Ø¹ 2", "Ø§Ù„Ø±Ø§Ø¨Ø¹ 3", "Ø§Ù„Ø±Ø§Ø¨Ø¹ 4", "Ø§Ù„Ø±Ø§Ø¨Ø¹ 5"],
      "Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³": ["Ø§Ù„Ø®Ø§Ù…Ø³ 1", "Ø§Ù„Ø®Ø§Ù…Ø³ 2", "Ø§Ù„Ø®Ø§Ù…Ø³ 3", "Ø§Ù„Ø®Ø§Ù…Ø³ 4"],
      "Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³": ["Ø§Ù„Ø³Ø§Ø¯Ø³ 1", "Ø§Ù„Ø³Ø§Ø¯Ø³ 2", "Ø§Ù„Ø³Ø§Ø¯Ø³ 3", "Ø§Ù„Ø³Ø§Ø¯Ø³ 4"]
    };

    let studentsList = [];     // Ù…ØµÙÙˆÙØ© Ù…Ø³Ø·Ù‘Ø­Ø© Ù„ÙƒÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨
    let currentIndex = 0;
    let isPlaying = true;
    let intervalMs = 8000;     // Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ 8 Ø«ÙˆØ§Ù†Ù
    let sliderTimer = null;

    const msgBox = document.getElementById("message");
    const cardContainer = document.getElementById("cardContainer");
    const controlsBox = document.getElementById("controlsBox");
    const counterText = document.getElementById("counterText");
    const speedRange = document.getElementById("speedRange");
    const speedValue = document.getElementById("speedValue");
    const playPauseBtn = document.getElementById("playPauseBtn");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    async function loadStudents() {
      try {
        const res = await fetch("students-data.json?_=" + Date.now());
        if (!res.ok) {
          msgBox.textContent = "ØªØ¹Ø°Ù‘Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù students-data.json";
          return;
        }
        const data = await res.json();
        buildStudentsList(data);
      } catch (e) {
        console.error(e);
        msgBox.textContent = "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.";
      }
    }

    function buildStudentsList(data) {
      studentsList = [];

      // Ù†Ù…Ø±Ù‘ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ (Ø«Ø§Ù„Ø«ØŒ Ø±Ø§Ø¨Ø¹ØŒ Ø®Ø§Ù…Ø³ØŒ Ø³Ø§Ø¯Ø³)
      Object.keys(gradeGroups).forEach(gradeName => {
        const classes = gradeGroups[gradeName];

        classes.forEach(cls => {
          const arr = data[cls];
          if (Array.isArray(arr)) {
            arr.forEach(st => {
              studentsList.push({
                name: st.name || "Ø·Ø§Ù„Ø¨",
                average: st.average || "-",
                photo: st.photo || "",
                className: cls,
                gradeName: gradeName
              });
            });
          }
        });
      });

      if (studentsList.length === 0) {
        msgBox.textContent = "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø§Ø¨ Ù…ØªÙÙˆÙ‚ÙˆÙ† Ù…Ø³Ø¬Ù„ÙˆÙ† Ø¨Ø¹Ø¯.";
        return;
      }

      msgBox.style.display = "none";
      controlsBox.style.display = "block";

      currentIndex = 0;
      renderCurrentStudent();
      startAutoPlay();
    }

    function renderCurrentStudent() {
      if (studentsList.length === 0) return;

      const st = studentsList[currentIndex];

      const card = document.createElement("div");
      card.className = "student-card";

      const photoHtml = st.photo
        ? `<img src="${st.photo}" alt="${st.name}">`
        : "";

      card.innerHTML = `
        <div class="student-photo">
          ${photoHtml}
        </div>
        <div class="student-name">${st.name}</div>
        <div class="student-average">Ø§Ù„Ù…Ø¹Ø¯Ù„: ${st.average}%</div>
        <div class="student-class">Ø§Ù„Ø´Ø¹Ø¨Ø©: ${st.className}</div>
        <div class="student-grade">${st.gradeName}</div>
      `;

      cardContainer.innerHTML = "";
      cardContainer.appendChild(card);

      counterText.textContent = `Ø·Ø§Ù„Ø¨ ${currentIndex + 1} Ù…Ù† ${studentsList.length}`;
    }

    function nextStudent() {
      if (studentsList.length === 0) return;
      currentIndex = (currentIndex + 1) % studentsList.length;
      renderCurrentStudent();
    }

    function prevStudent() {
      if (studentsList.length === 0) return;
      currentIndex = (currentIndex - 1 + studentsList.length) % studentsList.length;
      renderCurrentStudent();
    }

    function startAutoPlay() {
      clearInterval(sliderTimer);
      sliderTimer = setInterval(() => {
        if (isPlaying) {
          nextStudent();
        }
      }, intervalMs);
    }

    function togglePlayPause() {
      isPlaying = !isPlaying;
      playPauseBtn.textContent = isPlaying ? "â¸ Ø¥ÙŠÙ‚Ø§Ù" : "â–¶ï¸ ØªØ´ØºÙŠÙ„";

      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù€ interval Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
      startAutoPlay();
    }

    // ===== Events =====
    nextBtn.addEventListener("click", () => {
      nextStudent();
      // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ù…Ø¤Ù‚Øª Ø­ØªÙ‰ Ù„Ø§ ÙŠÙ†ØªÙ‚Ù„ ÙÙˆØ±Ø§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ·
      if (isPlaying) startAutoPlay();
    });

    prevBtn.addEventListener("click", () => {
      prevStudent();
      if (isPlaying) startAutoPlay();
    });

    playPauseBtn.addEventListener("click", togglePlayPause);

    speedRange.addEventListener("input", () => {
      const seconds = Number(speedRange.value);
      intervalMs = seconds * 1000;
      speedValue.textContent = seconds + "s";
      // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
      startAutoPlay();
    });

    // Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ­Ù…ÙŠÙ„
    loadStudents();
  </script>
</body>
</html>
