<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ù„Ø¨ÙˆÙ… Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…ØªÙÙˆÙ‚ÙŠÙ†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            animation: fadeIn 1s;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.9;
        }

        .controls {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
        }

        .filter-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .filter-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: #764ba2;
        }

        select {
            padding: 10px 20px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            animation: fadeIn 1s;
        }

        .student-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: all 0.3s;
            cursor: pointer;
            animation: slideUp 0.5s;
        }

        .student-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }

        .student-card img {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }

        .student-info {
            padding: 20px;
        }

        .student-name {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .student-details {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #666;
            font-size: 1.1em;
        }

        .grade-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }

        .average-badge {
            background: #ffd700;
            color: #333;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }

        .star-rating {
            color: #ffd700;
            font-size: 1.2em;
        }

        .loading {
            text-align: center;
            color: white;
            font-size: 1.5em;
            padding: 50px;
        }

        .no-data {
            text-align: center;
            color: white;
            font-size: 1.5em;
            padding: 50px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
        }

        /* Modal Ù„Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ÙƒØ¨Ø±Ø© */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            animation: fadeIn 0.3s;
        }

        .modal-content {
            position: relative;
            margin: auto;
            padding: 20px;
            max-width: 90%;
            max-height: 90%;
            top: 50%;
            transform: translateY(-50%);
            text-align: center;
        }

        .modal-content img {
            max-width: 100%;
            max-height: 80vh;
            border-radius: 10px;
        }

        .modal-info {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .close {
            position: absolute;
            top: 30px;
            left: 30px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
        }

        .close:hover {
            color: #ffd700;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stats {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            font-size: 1.1em;
        }

        .search-box {
            width: 300px;
            padding: 10px 20px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1em;
        }

        @media (max-width: 768px) {
            .gallery {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }

            .header h1 {
                font-size: 2em;
            }

            .controls {
                flex-direction: column;
            }

            .search-box {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ† Ø£Ù„Ø¨ÙˆÙ… Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…ØªÙÙˆÙ‚ÙŠÙ† ğŸ†</h1>
            <p>Ù…Ø¯Ø±Ø³Ø© Ø§Ø¨Ù† Ø³ÙŠÙ†Ø§ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©</p>
        </div>

        <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
        <div class="stats" id="stats">
            <div class="stat-item">
                <div class="stat-number" id="totalStudents">0</div>
                <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="avgScore">0</div>
                <div class="stat-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…Ø¹Ø¯Ù„</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="topGrade">-</div>
                <div class="stat-label">Ø§Ù„ØµÙ Ø§Ù„Ø£ÙƒØ«Ø± ØªÙ…ÙŠØ²Ø§Ù‹</div>
            </div>
        </div>

        <!-- Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ… -->
        <div class="controls">
            <input type="text" id="searchBox" class="search-box" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨...">
            
            <select id="gradeFilter">
                <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙÙˆÙ</option>
                <option value="Ø§Ù„Ø«Ø§Ù„Ø«">Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø«</option>
                <option value="Ø§Ù„Ø±Ø§Ø¨Ø¹">Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹</option>
                <option value="Ø§Ù„Ø®Ø§Ù…Ø³">Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³</option>
                <option value="Ø§Ù„Ø³Ø§Ø¯Ø³">Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³</option>
            </select>

            <select id="sortBy">
                <option value="name">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø§Ø³Ù…</option>
                <option value="average-high">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„ (Ø§Ù„Ø£Ø¹Ù„Ù‰)</option>
                <option value="average-low">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„ (Ø§Ù„Ø£Ù‚Ù„)</option>
                <option value="recent">Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹</option>
            </select>

            <button class="filter-btn" onclick="loadStudents()">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button>
        </div>

        <!-- Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø§Ø¨ -->
        <div id="gallery" class="gallery"></div>

        <!-- Modal Ù„Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ÙƒØ¨Ø±Ø© -->
        <div id="modal" class="modal" onclick="closeModal()">
            <span class="close">&times;</span>
            <div class="modal-content">
                <img id="modalImage" src="">
                <div class="modal-info" id="modalInfo"></div>
            </div>
        </div>
    </div>

    <script>
        let allStudents = [];
        let filteredStudents = [];

        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª GitHub - ÙŠØ¬Ø¨ ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§
        const GITHUB_CONFIG = {
            username: 'YOUR_USERNAME',  // Ø¶Ø¹ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‡Ù†Ø§
            repo: 'YOUR_REPO',          // Ø¶Ø¹ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ù‡Ù†Ø§
            branch: 'main'              // Ø§Ù„ÙØ±Ø¹
        };

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† GitHub
        async function loadStudents() {
            document.getElementById('gallery').innerHTML = '<div class="loading">â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>';

            try {
                const response = await fetch(
                    `https://api.github.com/repos/${GITHUB_CONFIG.username}/${GITHUB_CONFIG.repo}/contents/students.json?ref=${GITHUB_CONFIG.branch}`
                );

                if (response.ok) {
                    const data = await response.json();
                    const content = JSON.parse(atob(data.content));
                    allStudents = content.students || [];
                    filteredStudents = [...allStudents];
                    
                    updateStats();
                    applyFilters();
                } else if (response.status === 404) {
                    document.getElementById('gallery').innerHTML = '<div class="no-data">ğŸ“š Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø·Ù„Ø§Ø¨ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</div>';
                } else {
                    throw new Error('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                }
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('gallery').innerHTML = '<div class="no-data">âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>';
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStats() {
            const totalStudents = allStudents.length;
            document.getElementById('totalStudents').textContent = totalStudents;

            if (totalStudents > 0) {
                // Ø­Ø³Ø§Ø¨ Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…Ø¹Ø¯Ù„
                const avgScore = (allStudents.reduce((sum, s) => sum + parseFloat(s.average), 0) / totalStudents).toFixed(2);
                document.getElementById('avgScore').textContent = avgScore;

                // Ø§Ù„ØµÙ Ø§Ù„Ø£ÙƒØ«Ø± ØªÙ…ÙŠØ²Ø§Ù‹
                const gradeCounts = {};
                allStudents.forEach(s => {
                    gradeCounts[s.grade] = (gradeCounts[s.grade] || 0) + 1;
                });
                const topGrade = Object.keys(gradeCounts).reduce((a, b) => gradeCounts[a] > gradeCounts[b] ? a : b);
                document.getElementById('topGrade').textContent = topGrade;
            }
        }

        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„Ø§ØªØ±
        function applyFilters() {
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();
            const gradeFilter = document.getElementById('gradeFilter').value;
            const sortBy = document.getElementById('sortBy').value;

            // ØªØµÙÙŠØ©
            filteredStudents = allStudents.filter(student => {
                const matchSearch = student.name.toLowerCase().includes(searchTerm);
                const matchGrade = gradeFilter === 'all' || student.grade === gradeFilter;
                return matchSearch && matchGrade;
            });

            // ØªØ±ØªÙŠØ¨
            switch(sortBy) {
                case 'name':
                    filteredStudents.sort((a, b) => a.name.localeCompare(b.name, 'ar'));
                    break;
                case 'average-high':
                    filteredStudents.sort((a, b) => parseFloat(b.average) - parseFloat(a.average));
                    break;
                case 'average-low':
                    filteredStudents.sort((a, b) => parseFloat(a.average) - parseFloat(b.average));
                    break;
                case 'recent':
                    filteredStudents.reverse();
                    break;
            }

            displayStudents();
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø§Ø¨
        function displayStudents() {
            const gallery = document.getElementById('gallery');

            if (filteredStudents.length === 0) {
                gallery.innerHTML = '<div class="no-data">ğŸ˜” Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø©</div>';
                return;
            }

            gallery.innerHTML = filteredStudents.map((student, index) => {
                const stars = getStars(student.average);
                return `
                    <div class="student-card" onclick="showModal(${index})">
                        <img src="${student.image}" alt="${student.name}">
                        <div class="student-info">
                            <div class="student-name">${student.name}</div>
                            <div class="star-rating">${stars}</div>
                            <div class="student-details">
                                <span class="grade-badge">ğŸ“š ${student.grade}</span>
                                <span class="average-badge">ğŸ“Š ${student.average}</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø¬ÙˆÙ… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø¯Ù„
        function getStars(average) {
            const avg = parseFloat(average);
            if (avg >= 95) return 'â­â­â­â­â­';
            if (avg >= 90) return 'â­â­â­â­';
            if (avg >= 85) return 'â­â­â­';
            if (avg >= 80) return 'â­â­';
            return 'â­';
        }

        // Ø¹Ø±Ø¶ Modal
        function showModal(index) {
            const student = filteredStudents[index];
            document.getElementById('modal').style.display = 'block';
            document.getElementById('modalImage').src = student.image;
            document.getElementById('modalInfo').innerHTML = `
                <h2>${student.name}</h2>
                <p style="font-size: 1.3em; margin: 10px 0;">
                    <strong>Ø§Ù„ØµÙ:</strong> ${student.grade} | 
                    <strong>Ø§Ù„Ù…Ø¹Ø¯Ù„:</strong> ${student.average}
                </p>
                <p style="font-size: 1.5em; color: #ffd700;">
                    ${getStars(student.average)}
                </p>
            `;
        }

        // Ø¥ØºÙ„Ø§Ù‚ Modal
        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        // Ù…Ø³ØªÙ…Ø¹Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        document.getElementById('searchBox').addEventListener('input', applyFilters);
        document.getElementById('gradeFilter').addEventListener('change', applyFilters);
        document.getElementById('sortBy').addEventListener('change', applyFilters);

        // Ù…Ù†Ø¹ Ø¥ØºÙ„Ø§Ù‚ Modal Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
        document.querySelector('.modal-content').addEventListener('click', function(e) {
            e.stopPropagation();
        });

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', loadStudents);
    </script>
</body>
</html>